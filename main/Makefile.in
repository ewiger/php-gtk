LTLIBRARY_NAME = libphp_gtk_src.la
LTLIBRARY_SOURCES = php_gtk.c php_gtk_object.c php_gtk_types.c php_gtk_util.c $(PHP_GTK_GEN_SOURCES)

include $(top_srcdir)/build/dynlib.mk

php_gtk.o php_gtk.lo php_gtk.slo: php_gtk_gen_ce.h php_gtk_gen_reg_items.h

php_gtk_gen_ce.h: $(PHP_GTK_GEN_SOURCES)
	grep -h "^zend_class_entry" $(PHP_GTK_GEN_SOURCES) | sed -e "s!^!extern !" > $(srcdir)/php_gtk_gen_ce.h

php_gtk_gen_reg_items.h:
	php -q $(top_srcdir)/generator/make_reg_items.php $(PHP_GTK_MODULES)

php_gtk_gen_gtk.c: $(top_srcdir)/generator/gtk.defs $(top_srcdir)/generator/gtk-extrafuncs.defs  $(top_srcdir)/generator/gtk.overrides
	php -q $(top_srcdir)/generator/generator.php -o gtk.overrides -p gtk gtk.defs

php_gtk_gen_gdk.c: $(top_srcdir)/generator/gdk.defs $(top_srcdir)/generator/gdk.overrides
	php -q $(top_srcdir)/generator/generator.php -o gdk.overrides -p gdk gdk.defs

php_gtk_gen_libglade.c: $(top_srcdir)/generator/libglade.defs $(top_srcdir)/generator/libglade.overrides
	php -q $(top_srcdir)/generator/generator.php -o libglade.overrides -p libglade -r gtk.defs libglade.defs
