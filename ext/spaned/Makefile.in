LTLIBRARY_NAME          = libspaned.la
LTLIBRARY_SOURCES       = php_spaned.c gen_spaned.c gtkspaned.c gtkshpaned.c gtksvpaned.c
LTLIBRARY_LIBADD        = $(SPANED_SHARED_LIBADD)
LTLIBRARY_SHARED_NAME   = php_gtk_spaned.la
LTLIBRARY_SHARED_LIBADD = $(SPANED_SHARED_LIBADD)

include $(top_srcdir)/build/dynlib.mk

php_spaned.o php_spaned.lo php_spaned.slo: gen_ce_spaned.h

gen_spaned.c: spaned.defs spaned.overrides
	$(PHP) -q $(top_srcdir)/generator/generator.php -o $(srcdir)/spaned.overrides -p SPaned -r $(top_srcdir)/ext/gtk%2b/gtk.defs $(srcdir)/spaned.defs > gen_spaned.c

gen_ce_spaned.h: gen_spaned.c
	grep -h "^PHP_GTK_EXPORT_CE" gen_spaned.c | sed -e "s!^!extern !" > gen_ce_spaned.h

