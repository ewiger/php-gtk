LTLIBRARY_NAME          = libscrollpane.la
LTLIBRARY_SOURCES       = php_scrollpane.c gen_scrollpane.c gtkscrollpane.c
LTLIBRARY_LIBADD        = $(SCROLLPANE_SHARED_LIBADD)
LTLIBRARY_SHARED_NAME   = php_gtk_scrollpane.la
LTLIBRARY_SHARED_LIBADD = $(SCROLLPANE_SHARED_LIBADD)

include $(top_srcdir)/build/dynlib.mk

php_scrollpane.o php_scrollpane.lo php_scrollpane.slo: gen_ce_scrollpane.h

gen_scrollpane.c: scrollpane.defs scrollpane.overrides
	$(PHP) -q $(top_srcdir)/generator/generator.php -o $(srcdir)/scrollpane.overrides -p Scrollpane -r $(top_srcdir)/ext/gtk%2b/gtk.defs $(srcdir)/scrollpane.defs > gen_scrollpane.c

gen_ce_scrollpane.h: gen_scrollpane.c
	grep -h "^PHP_GTK_EXPORT_CE" gen_scrollpane.c | sed -e "s!^!extern !" > gen_ce_scrollpane.h

